<!DOCTYPE html>
<html lang="zh-Hans">
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="Mochazz" />



<meta name="description" content="DDOS(Distributed Denial of Service)，又称分布式拒绝服务攻击。骇客通过控制的多个计算机或服务器，发送大量合法请求(more)">
<meta name="keywords" content="DDOS">
<meta property="og:type" content="article">
<meta property="og:title" content="DDOS原理与防御">
<meta property="og:url" content="https://mochazz.github.io/2017/07/15/DDOS(1)/index.html">
<meta property="og:site_name" content="Mochazz&#39;s Blog">
<meta property="og:description" content="DDOS(Distributed Denial of Service)，又称分布式拒绝服务攻击。骇客通过控制的多个计算机或服务器，发送大量合法请求(more)">
<meta property="og:image" content="https://mochazz.github.io/img/DDOS/d1.png">
<meta property="og:image" content="https://mochazz.github.io/img/DDOS/d2.png">
<meta property="og:image" content="https://mochazz.github.io/img/DDOS/d3.png">
<meta property="og:image" content="https://mochazz.github.io/img/DDOS/d4.png">
<meta property="og:image" content="https://mochazz.github.io/img/DDOS/d5.png">
<meta property="og:image" content="https://mochazz.github.io/img/DDOS/d6.png">
<meta property="og:image" content="https://mochazz.github.io/img/DDOS/d7.png">
<meta property="og:updated_time" content="2017-07-23T10:59:09.866Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="DDOS原理与防御">
<meta name="twitter:description" content="DDOS(Distributed Denial of Service)，又称分布式拒绝服务攻击。骇客通过控制的多个计算机或服务器，发送大量合法请求(more)">
<meta name="twitter:image" content="https://mochazz.github.io/img/DDOS/d1.png">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="Mochazz&#39;s Blog" type="application/atom+xml">





    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">



<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>DDOS原理与防御 | Mochazz&#39;s Blog</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: false,
        isPost: true,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: true
    }
</script>


    <script>
        yiliaConfig.jquery_ui = [true, "//cdn.bootcss.com/jqueryui/1.10.4/jquery-ui.min.js", "//cdn.bootcss.com/jqueryui/1.10.4/css/jquery-ui.min.css"];
    </script>



    <script> yiliaConfig.rootUrl = "\/";</script>





    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?22c98b0211a54fd849cf0f4f46698142";
            var s = document.getElementsByTagName("script")[0]; 
            s.parentNode.insertBefore(hm, s);
        })();
    </script>


</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/23.jpg" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">Mochazz</a></h1>
        </hgroup>

        

        
            <form id="search-form">
            <input type="text" id="local-search-input" name="q" placeholder="search..." class="search form-control" autocomplete="off" autocorrect="off" searchonload="undefined" />
            <i class="fa fa-times" onclick="resetSearch()"></i>
            </form>
            <div id="local-search-result"></div>
            <p class='no-result'>No results found <i class='fa fa-spinner fa-pulse'></i></p>
        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="mailto:379032449@qq.com" title="Email"></a>
                            
                                <a class="fa GitHub" href="#" title="GitHub"></a>
                            
                                <a class="fa RSS" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CTF/">CTF</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DDOS/">DDOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PHP/">PHP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux子系统/">linux子系统</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ms17-010/">ms17-010</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/windows安装hexo/">windows安装hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/后门/">后门</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/工具使用/">工具使用</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/文件上传/">文件上传</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/环境搭建/">环境搭建</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">有些东西不写就忘了，趁着年轻。</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">Mochazz</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/23.jpg" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">Mochazz</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:379032449@qq.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="#" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我"/>
</nav>
      <div class="body-wrap"><article id="post-DDOS(1)" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/07/15/DDOS(1)/" class="article-date">
      <time datetime="2017-07-15T14:00:00.000Z" itemprop="datePublished">2017-07-15</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      DDOS原理与防御
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/拒绝服务/">拒绝服务</a>
    </div>


        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DDOS/">DDOS</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <center><img src="/img/DDOS/d1.png" alt=""></center>

<h3 id="DDOS简介"><a href="#DDOS简介" class="headerlink" title="DDOS简介"></a>DDOS简介</h3><p>DDOS(Distributed Denial of Service)，又称分布式拒绝服务攻击。骇客通过控制的多个肉鸡或服务器，发送大量合法请求，从而达到占用大量网络资源，瘫痪网络，阻止用户对网络资源的正常访问,属于资源耗尽型。</p>
<h3 id="DDOS危害"><a href="#DDOS危害" class="headerlink" title="DDOS危害"></a>DDOS危害</h3><p>出口带宽堵死<br>服务器无法连接<br>服务器卡、慢、死机<br>游戏掉线导致客户流失<br>服务器连接数多，连接资源被耗尽</p>
<h3 id="攻击来源"><a href="#攻击来源" class="headerlink" title="攻击来源"></a>攻击来源</h3><p>高性能服务器配合发包软件<br>存在漏洞的互联网主机<br>骇客控制的僵尸网络</p>
<h3 id="流量特点"><a href="#流量特点" class="headerlink" title="流量特点"></a>流量特点</h3><p>IP地址随机或固定某些IP段随机<br>没有完整完成三次握手</p>
<h3 id="导致DDOS原因"><a href="#导致DDOS原因" class="headerlink" title="导致DDOS原因"></a>导致DDOS原因</h3><p>带宽上限<br>协议缺陷<br>设备性能上限<br>应用性能上限<br>系统性能上限</p>
<h3 id="攻击类型"><a href="#攻击类型" class="headerlink" title="攻击类型"></a>攻击类型</h3><h4 id="Smurf攻击"><a href="#Smurf攻击" class="headerlink" title="Smurf攻击"></a><a href="http://www.zzbaike.com/wiki/Smurf" target="_blank" rel="external">Smurf攻击</a></h4><p>原理：攻击者向网络广播地址发送ICMP包，并将该ICMP请求报文的源地址设置成受害主机IP地址，之后受害主机会收到该网络内所有主机发来的ICMP应答报文，通过大量ICMP应答报文来淹没受害主机，最终导致网络阻塞，受害主机崩溃。</p>
<p>防御：配置路由器禁止IP广播包<br>配置网络上所有计算机的操作系统，禁止对目标地址为广播地址的ICMP包响应。<br>被攻击目标与ISP协商，有ISP暂时阻止这些流量。<br>对于从本网络向外部网络发送的数据包，本网络应该将其源地址为其他网络的这部分数据包过滤掉。</p>
<h4 id="TearDrop攻击"><a href="#TearDrop攻击" class="headerlink" title="TearDrop攻击"></a><a href="https://en.wikipedia.org/wiki/Teardrop" target="_blank" rel="external">TearDrop攻击</a></h4><p>原理：通过设置错误的片偏移，使得数据包到达服务器时，服务器无法重新组合数据包，最终导致崩溃。这种攻击主要对旧的windows版本和Linux版本有效。这是Wikipedia的解释：</p>
<center><img src="/img/DDOS/d2.png" alt=""></center><br>报文图示：<br><center><img src="/img/DDOS/d3.png" alt=""></center>

<p>防御：采用<a href="https://wenku.baidu.com/view/b45bba61ddccda38376baf7f.html" target="_blank" rel="external">分片重组检查算法</a></p>
<h4 id="Land-attack"><a href="#Land-attack" class="headerlink" title="Land attack"></a><a href="https://en.wikipedia.org/wiki/LAND" target="_blank" rel="external">Land attack</a></h4><p>原理：将数据包的源IP与目的IP都设置成目标IP，这样目标就会不断的和自己建立连接，最终导致拒绝服务。</p>
<p>防御：这种攻击对早期系统有效。设置防火墙和路由规则，丢弃、过滤这种数据包。</p>
<h4 id="SYN-FLOOD攻击"><a href="#SYN-FLOOD攻击" class="headerlink" title="SYN FLOOD攻击"></a><a href="https://en.wikipedia.org/wiki/SYN_flood" target="_blank" rel="external">SYN FLOOD攻击</a></h4><p>原理：Syn flood攻击是通过发送大量伪造的带有syn标志位的TCP报文，与目标主机建立了很多虚假的半开连接，使目标服务器连接资源耗尽，从而达到拒绝服务的目的。</p>
<p>防御：Syncheck：3次握手变成了6次握手，验证通过后需要由ADS代理后续报文。适用于对称网络，对设备代理性能要求高。<br>SafeConnect：对所有的SYN包均主动回应带有错误字段的包，真实存在的IP地址会发送reset包给防护设备，然后发起第2次连接，从而建立TCP连接。如果骇客使用真实IP进行DDOS则可绕过验证算法。<br>DynaCheck：对所有的SYN包均主动回应正常的SYN/ACK报文，真实存在的IP地址会发送ACK确认包给防护设备，然后防护设备主动reset此连接，并认证通过，等待客户端发起第2次连接，从而建立TCP连接。有的客户端在3次握手完成后被reset，不会主动重连，需要由用户人工刷新重新连接。</p>
<center><img src="/img/DDOS/d4.png" alt=""></center><br><center>TCP3次握手过程</center>

<h4 id="ACK-FLOOD攻击"><a href="#ACK-FLOOD攻击" class="headerlink" title="ACK FLOOD攻击"></a><a href="http://www.vants.org/?post=136" target="_blank" rel="external">ACK FLOOD攻击</a></h4><p>原理：Ack flood攻击是利用三次握手的第二段。攻击主机伪造大量的syn+ack包发送给目标主机，目标主机每收到一个带有 ack标志位的数据包时，都会去自己的TCP连接表中查看有没有与ack的发送者建立连接 ，如果有则发送ack+seq包完成三次握手，完成TCP连接建立。如果没有则发送ack+rst 断开连接。但是在这个过程中会消耗一定的CUP计算资源。如果瞬间收到大量的syn+ack数据包。将会消耗服务器的大量cpu资源，肯导致正常的连接无法建立或增加延迟，甚至造成服务器瘫痪、死机。Syn flood与Ack flood结合效果更好。</p>
<p>防御：利用对称性判断来分析出是否有攻击存在；通过限速或动态指纹的方式；在连续收到用户发送的ACK包时，中断回话，让其重连。</p>
<h4 id="UDP-FLOOD攻击"><a href="#UDP-FLOOD攻击" class="headerlink" title="UDP FLOOD攻击"></a><a href="https://en.wikipedia.org/wiki/UDP_flood_attack" target="_blank" rel="external">UDP FLOOD攻击</a></h4><p>原理：UDP FLOOD攻击是利用UDP协议进行攻击的，UDP FLOOD攻击可以是小数据包,也可以是大数据包阻塞链路占尽带宽。通过快速发包，大量小流量包也可以打出高流量。</p>
<p>防御：限速丢包</p>
<h4 id="CC攻击"><a href="#CC攻击" class="headerlink" title="CC攻击"></a><a href="http://jingyan.baidu.com/article/ca41422f8a630f1eae99ed92.html" target="_blank" rel="external">CC攻击</a></h4><p>原理：CC攻击的原理就是攻击者控制肉鸡或使用代理服务器，不停地发大量数据包给对方服务器，制造大量的后台数据库查询动作，消耗目标CPU资源，一直到宕机崩溃。</p>
<p>防御：将网页做成静态;限制连接数量;修改最大超时时间;让一些操作提供验证码。<br>Tag验证：在response报文中添加tag信息，验证用户IP合法性<br>Cookies验证：在response报文中添加cookies信息，验证用户IP合法性<br>Url验证：在response报文中设置URL校验字段，验证用户IP合法性<br>Ascii图片验证：用户发送http get请求时，要求用户手工输入验证<br>Bmp图片验证：用户发送http get请求时，要求用户手工输入验证<br>FCS验证：数据包中带有游戏控制数据</p>
<h4 id="HTTP慢速攻击"><a href="#HTTP慢速攻击" class="headerlink" title="HTTP慢速攻击"></a><a href="https://www.nigesb.com/some-slowhttp-dos-attack-method.html" target="_blank" rel="external">HTTP慢速攻击</a></h4><p>原理：黑客模拟正常用户向web服务器发送慢速http请求，由于是慢速的，服务器端需要保持连接资源，直到数据传输结束才可释放连接。当服务器端建立了大量这样的慢速连接，就会导致服务器拒绝服务。这种攻击可以分为两类，一类是客户端发数据，另一类是客户端读取服务器发来的数据。下面是英文介绍：</p>
<blockquote>
<p>If an HTTP request is not complete, or if the transfer rate is very low, the server keeps its resources busy waiting for the rest of the data. If the server keeps too many resources busy, this creates a denial of service. </p>
</blockquote>
<p>HTTP慢速攻击还可以细分成以下几种攻击方式</p>
<h5 id="Slowloris攻击方式"><a href="#Slowloris攻击方式" class="headerlink" title="Slowloris攻击方式"></a>Slowloris攻击方式</h5><p>完整的http请求结尾是\r\n\r\n，然而使用\r\n来结尾，服务端就会一直等待我们发送数据直到超时。</p>
<h5 id="Slow-Post攻击方式"><a href="#Slow-Post攻击方式" class="headerlink" title="Slow Post攻击方式"></a>Slow Post攻击方式</h5><p>http头部信息的content-length声明post数据的长度，我们可以设置很大的content-length，然后缓慢发送数据部分，比如一次只发送一个字节，这样服务器断就要一直保持连接。</p>
<h5 id="Slow-Read攻击方式"><a href="#Slow-Read攻击方式" class="headerlink" title="Slow Read攻击方式"></a>Slow Read攻击方式</h5><p>黑客通过修改TCP windows窗口大小，缓慢读取服务器端发来的数据，耗尽应用的并发连接池。</p>
<h5 id="Apache-Range-Header攻击"><a href="#Apache-Range-Header攻击" class="headerlink" title="Apache Range Header攻击"></a>Apache Range Header攻击</h5><p>这种攻击方式只针对apache，当客户端传输大文件时会有range字段，表示将大文件分段，分成几个小段进行传输。这种攻击方式主要是消耗服务器CPU和内存资源。<br>防御：限制每个IP请求频率，使用验证码，限制每个数据包的大小，设置数据包传输超时时间</p>
<h4 id="NTP放大攻击"><a href="#NTP放大攻击" class="headerlink" title="NTP放大攻击"></a><a href="http://www.tiejiang.org/12686.html" target="_blank" rel="external">NTP放大攻击</a></h4><p>原理：请求包要远小于回复包，以一个字节的数据换十个字节的数据回来，这就是一种放大。将请求包的源地址写成目标IP地址,目标收到这些大字节回复报文，最终导致服务器宕机。</p>
<p>防御：<br>升级NTP服务器<br>在网络出口封禁UDP 123端口<br>使用防 DDoS 设备进行清洗<br>通过网络层或者借助运营商实施ACL来防御<br>关闭现在NTP服务的monlist功能，在ntp.conf配置文件中增加<code>disable monitor</code>选项</p>
<center><img src="/img/DDOS/d5.png" alt=""></center>

<h4 id="DNS放大攻击"><a href="#DNS放大攻击" class="headerlink" title="DNS放大攻击"></a><a href="http://blog.sina.com.cn/s/blog_90bb1f200101iazl.html" target="_blank" rel="external">DNS放大攻击</a></h4><p>原理：与NTP放大攻击类似，这里不再赘述。</p>
<p>防御：拥有足够的带宽承受小规模攻击<br>联系ISP清洗上游流量<br>限制DNS服务器的循环查询能力</p>
<h4 id="SNMP放大攻击"><a href="#SNMP放大攻击" class="headerlink" title="SNMP放大攻击"></a><a href="http://blog.sina.com.cn/s/blog_4bbb13b20102vbfi.html" target="_blank" rel="external">SNMP放大攻击</a></h4><p>原理：与NTP放大攻击类似，这里不再赘述。</p>
<p>防御：与DNS放大攻击防御方法类似。</p>
<h4 id="TFTP放大攻击"><a href="#TFTP放大攻击" class="headerlink" title="TFTP放大攻击"></a><a href="http://blog.nsfocus.net/tftp-reflection-attack-analysis-report/" target="_blank" rel="external">TFTP放大攻击</a></h4><p>原理：利用了TFTP协议上的缺陷，伪造源地址向服务器发起请求，服务器回复的第1个data数据包后无法收到客户端发送的ACK。此时TFTP就会利用他的重传机制，定时重传第1个data数据包，直至超时。</p>
<p>防御：不要将TFTP服务器暴露在公网上<br>对流经TFTP服务的流量进行入侵检测<br>将重传（数据包）率设置为1</p>
<center><img src="/img/DDOS/d6.png" alt=""></center>

<h4 id="XXS-DDOS"><a href="#XXS-DDOS" class="headerlink" title="XXS-DDOS"></a><a href="http://www.freebuf.com/articles/rookie/127533.html" target="_blank" rel="external">XXS-DDOS</a></h4><p>原理：利用存储型XXS漏洞，在网站中插入js代码。js功能是不断向目标发起请求，从而导致服务器宕机。</p>
<p>防御：由于该DDOS是由XSS导致，我们只要预防XSS漏洞即可。即对输入以及url参数进行过滤，对输出进行编码，并结合黑白名单机制。</p>
<h4 id="时间透镜攻击"><a href="#时间透镜攻击" class="headerlink" title="时间透镜攻击"></a><a href="http://www.freebuf.com/articles/rookie/127533.html" target="_blank" rel="external">时间透镜攻击</a></h4><p>原理：通过控制相同源和相同目的IP的IP报文，使得数据包走不同的路径但是在同一时间到达目标服务器，从而达到流量放大攻击的目的。</p>
<p>防御：增加抖动，干扰攻击路径，使得数据包无法预期到达<br>由运营商禁止源路由</p>
<center><img src="/img/DDOS/d7.png" alt=""></center>

<h3 id="其他防御措施"><a href="#其他防御措施" class="headerlink" title="其他防御措施"></a>其他防御措施</h3><p>采用高性能的网络设备<br>充足的网络带宽保证<br>升级主机服务器硬件<br>把网站做成静态页面<br>避免将服务器的真实ip暴露在公网中</p>
<hr>
<p>更深入了解DDOS可以参考以下文章：<br><a href="http://www.freebuf.com/articles/network/126702.html" target="_blank" rel="external">浅谈拒绝服务攻击的原理与防御（1）:普通拒绝服务攻击</a><br><a href="http://www.freebuf.com/articles/rookie/127116.html" target="_blank" rel="external">浅谈拒绝服务攻击的原理与防御（2）：反射型DDOS</a><br><a href="http://www.freebuf.com/articles/network/127218.html" target="_blank" rel="external">浅谈拒绝服务攻击的原理与防御（3）：反射DDOS攻击利用代码</a><br><a href="http://www.freebuf.com/articles/rookie/127533.html" target="_blank" rel="external">浅谈拒绝服务攻击的原理与防御（4）：新型DDOS攻击 – Websocket和临时透镜</a><br><a href="http://www.freebuf.com/articles/network/129288.html" target="_blank" rel="external">浅谈拒绝服务攻击的原理与防御（5）：NTP反射攻击复现</a><br><a href="http://www.freebuf.com/articles/network/130357.html" target="_blank" rel="external">浅谈拒绝服务攻击的原理与防御（7）：用Python和C实现syn flood攻击</a><br><a href="http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7163026&amp;tag=1" target="_blank" rel="external">Temporal Lensing and its Application in Pulsing Denial-of-Service Attacks</a><br><a href="http://wooyun.jozxing.cc/static/drops/papers-926.html" target="_blank" rel="external">浅谈基于 NTP 的反射和放大攻击</a> | <a href="http://www.freebuf.com/articles/network/76021.html" target="_blank" rel="external">浅析各类DDoS攻击放大技术</a><br><a href="http://wooyun.jozxing.cc/static/drops/papers-955.html" target="_blank" rel="external">NTP反射型DDos攻击FAQ/补遗</a> | <a href="http://blog.sina.com.cn/s/blog_459861630101b4wf.html" target="_blank" rel="external">NTP Reply Flood Attack</a> | <a href="http://blog.nsfocus.net/tftp-reflection-attack-analysis-report/" target="_blank" rel="external">TFTP反射攻击分析报告</a></p>

      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>本文标题:</span><a href="/2017/07/15/DDOS(1)/">DDOS原理与防御</a></p>
        <p><span>文章作者:</span><a href="/" title="回到主页">Mochazz</a></p>
        <p><span>发布时间:</span>2017-07-15, 22:00:00</p>
        <p><span>最后更新:</span>2017-07-23, 18:59:09</p>
        <p>
            <span>原始链接:</span><a class="post-url" href="/2017/07/15/DDOS(1)/" title="DDOS原理与防御">https://mochazz.github.io/2017/07/15/DDOS(1)/</a>
            <span class="copy-path" data-clipboard-text="原文: https://mochazz.github.io/2017/07/15/DDOS(1)/　　作者: Mochazz" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target = "_blank">"署名-非商用-相同方式共享 4.0"</a> 转载请保留原文链接及作者。
        </p>
    </div>



    <nav id="article-nav">
        
            <div id="article-nav-newer" class="article-nav-title">
                <a href="/2017/07/19/DDOS(2)/">
                    DDOS攻击模拟复现
                </a>
            </div>
        
        
            <div id="article-nav-older" class="article-nav-title">
                <a href="/2017/07/15/ms17-010/">
                    MS17-010复现
                </a>
            </div>
        
    </nav>

  
</article>

    <div id="toc" class="toc-article">
        <strong class="toc-title">文章目录</strong>
        
            <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#DDOS简介"><span class="toc-number">1.</span> <span class="toc-text">DDOS简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DDOS危害"><span class="toc-number">2.</span> <span class="toc-text">DDOS危害</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#攻击来源"><span class="toc-number">3.</span> <span class="toc-text">攻击来源</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#流量特点"><span class="toc-number">4.</span> <span class="toc-text">流量特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#导致DDOS原因"><span class="toc-number">5.</span> <span class="toc-text">导致DDOS原因</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#攻击类型"><span class="toc-number">6.</span> <span class="toc-text">攻击类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Smurf攻击"><span class="toc-number">6.1.</span> <span class="toc-text">Smurf攻击</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#TearDrop攻击"><span class="toc-number">6.2.</span> <span class="toc-text">TearDrop攻击</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Land-attack"><span class="toc-number">6.3.</span> <span class="toc-text">Land attack</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SYN-FLOOD攻击"><span class="toc-number">6.4.</span> <span class="toc-text">SYN FLOOD攻击</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ACK-FLOOD攻击"><span class="toc-number">6.5.</span> <span class="toc-text">ACK FLOOD攻击</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#UDP-FLOOD攻击"><span class="toc-number">6.6.</span> <span class="toc-text">UDP FLOOD攻击</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CC攻击"><span class="toc-number">6.7.</span> <span class="toc-text">CC攻击</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HTTP慢速攻击"><span class="toc-number">6.8.</span> <span class="toc-text">HTTP慢速攻击</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Slowloris攻击方式"><span class="toc-number">6.8.1.</span> <span class="toc-text">Slowloris攻击方式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Slow-Post攻击方式"><span class="toc-number">6.8.2.</span> <span class="toc-text">Slow Post攻击方式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Slow-Read攻击方式"><span class="toc-number">6.8.3.</span> <span class="toc-text">Slow Read攻击方式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Apache-Range-Header攻击"><span class="toc-number">6.8.4.</span> <span class="toc-text">Apache Range Header攻击</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#NTP放大攻击"><span class="toc-number">6.9.</span> <span class="toc-text">NTP放大攻击</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DNS放大攻击"><span class="toc-number">6.10.</span> <span class="toc-text">DNS放大攻击</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SNMP放大攻击"><span class="toc-number">6.11.</span> <span class="toc-text">SNMP放大攻击</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#TFTP放大攻击"><span class="toc-number">6.12.</span> <span class="toc-text">TFTP放大攻击</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#XXS-DDOS"><span class="toc-number">6.13.</span> <span class="toc-text">XXS-DDOS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#时间透镜攻击"><span class="toc-number">6.14.</span> <span class="toc-text">时间透镜攻击</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#其他防御措施"><span class="toc-number">7.</span> <span class="toc-text">其他防御措施</span></a></li></ol>
        
    </div>
    <style>
        .left-col .switch-btn,
        .left-col .switch-area {
            display: none;
        }
        .toc-level-3 i,
        .toc-level-3 ol {
            display: none !important;
        }
    </style>

    <input type="button" id="tocButton" value="隐藏目录"  title="点击按钮隐藏或者显示文章目录">

    <script>
        yiliaConfig.toc = ["隐藏目录", "显示目录", !!"false"];
    </script>



    
<div class="share">
    
        <div class="bdsharebuttonbox">
            <a href="#" class="fa fa-twitter bds_twi" data-cmd="twi" title="分享到推特"></a>
            <a href="#" class="fa fa-weibo bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
            <a href="#" class="fa fa-qq bds_sqq" data-cmd="sqq" title="分享给 QQ 好友"></a>
            <a href="#" class="fa fa-files-o bds_copy" data-cmd="copy" title="复制网址"></a>
            <a href="#" class="fa fa fa-envelope-o bds_mail" data-cmd="mail" title="通过邮件分享"></a>
            <a href="#" class="fa fa-weixin bds_weixin" data-cmd="weixin" title="生成文章二维码"></a>
            <a href="#" class="fa fa-share-alt bds_more" data-cmd="more"></i></a>
        </div>
        <script>
            window._bd_share_config={
                "common":{"bdSnsKey":{},"bdText":"DDOS原理与防御　| Mochazz's Blog　","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
        </script>
    

    
</div>







    
        <section id="comments">
    <style> aside.comment-bar { margin: auto 30px; }</style>
    <div id="disqus_thread"></div>
    <script>
        var disqus_config = function(){
            this.page.url = 'https://mochazz.github.io/2017/07/15/DDOS(1)/';
            this.page.identifier = '2017/07/15/DDOS(1)/';
        };
        var loadComment = function(){
            var d = document, s = d.createElement('script');
            s.src = '//mochazz.github.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        }
    </script>
    
    <script> loadComment(); </script>

</section>


    




    <div class="scroll" id="post-nav-button">
        
            <a href="/2017/07/19/DDOS(2)/" title="上一篇: DDOS攻击模拟复现">
                <i class="fa fa-angle-left"></i>
            </a>
        

        <a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>

        
            <a href="/2017/07/15/ms17-010/" title="下一篇: MS17-010复现">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>

    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/08/01/php(3)/">PHP之数组与文件</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/01/php(2)/">php之字符串和正则匹配</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/30/php(1)/">PHP之基础入门</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/29/shift/">通过shift快捷键运行后门</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/27/linux_subsystem/">windows10安装linux子系统</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/26/hexo-build/">使用hexo+github部署自己的博客</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/23/hping3/">hping3使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/19/DDOS(2)/">DDOS攻击模拟复现</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/15/DDOS(1)/">DDOS原理与防御</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/15/ms17-010/">MS17-010复现</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/14/IIS/">漏洞环境搭建之Windows+IIS6.0+SqlServer+ASP</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/13/LAMP/">漏洞环境搭建之Linux+Apache+Mysql+PHP</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/10/2017ncstisc/">2017全国信息安全竞赛 WriteUp</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/06/wolf_cms/">wolf cms上传漏洞分析</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/04/happyctf/">HappyCTF WriteUp</a></li></ul>




    <script>
        
    </script>
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2017 Mochazz
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit"  title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>





    <script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
            
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>